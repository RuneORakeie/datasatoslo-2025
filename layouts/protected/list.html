{{ define "main" }}

{{ $lang := .Site.Language.Lang }}

<div id="protectedContent" style="display: none;">
    <div class="hero">
        <h1>{{ $.Page.Params.Title }}</h1>
        <div class="description">
            {{ .Content }}
        </div>
    </div>

    <section class="blogs">
        {{ range .Pages }}
        <article>
            <a class="visually-hidden" aria-hidden="true" href="{{ .Permalink }}">{{ .Title }}</a>
            <a class="blog" href="{{ .Permalink }}">
                {{ $img := (replace .Params.image "." "-mini.") }}
                {{ partial "picture" (dict "img" $img "class" "img") }}
                
                <div class="info">
                    <div class="date">{{ partial "date-short.html" (dict "time" .Date "lang" $lang) }}</div>
                    <h2>{{ .Title }}</h2>
                    <span class="brief">{{ .Params.brief }}</span>
                    <p>{{ .Summary }} ...</p>
                </div>
            </a>
        </article>
        {{ end }}
    </section>
</div>

<div id="passwordPrompt" class="password-prompt">
    <h2>Enter Password</h2>
    <input type="password" id="passwordInput" />
    <button onclick="checkPassword()">Submit</button>
</div>

<script>
const CORRECT_PASSWORD = "your-password-here"; 

function checkPassword() {
    const input = document.getElementById('passwordInput').value;
    if (input === CORRECT_PASSWORD) {
        document.getElementById('passwordPrompt').style.display = 'none';
        document.getElementById('protectedContent').style.display = 'block';
        sessionStorage.setItem('isAuthenticated', 'true');
    } else {
        alert('Incorrect password');
    }
}

// Check if already authenticated
window.onload = function() {
    if (sessionStorage.getItem('isAuthenticated') === 'true') {
        document.getElementById('passwordPrompt').style.display = 'none';
        document.getElementById('protectedContent').style.display = 'block';
    }
}
</script>

<style>
.password-prompt {
    max-width: 400px;
    margin: 100px auto;
    text-align: center;
    padding: 20px;
}

.password-prompt input {
    display: block;
    width: 100%;
    margin: 10px 0;
    padding: 8px;
}

.password-prompt button {
    padding: 8px 20px;
    background: var(--primary);
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}
</style>

{{ end }}
